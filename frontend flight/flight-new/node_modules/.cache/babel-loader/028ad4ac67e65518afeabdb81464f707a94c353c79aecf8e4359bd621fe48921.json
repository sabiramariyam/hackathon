{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\bmariyam\\\\Downloads\\\\project (3)\\\\project\\\\frontend flight\\\\flight-new\\\\src\\\\components\\\\Payment.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useRef, useState } from 'react';\nimport { useNavigate, useSearchParams } from 'react-router-dom';\nimport authHeader from '../services/auth-header';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet PaymentComponent = () => {\n  _s();\n  const [searchparams] = useSearchParams();\n  console.log(searchparams.get(\"Fid\"));\n  const id = parseInt(searchparams.get(\"Fid\"));\n  const [records, setBooking] = useState([]);\n  useEffect(() => {\n    fetch(`http://localhost:8082/api/booking/tickets/${id}`, {\n      headers: authHeader()\n    }).then(res => res.json()).then(result => {\n      setBooking(result);\n    });\n  }, [id]);\n  console.log(records);\n  const navigate = useNavigate();\n  const val = parseFloat(records.price);\n  console.log(val);\n  const paypal = useRef();\n  useEffect(() => {\n    if (window.myButton) window.myButton.close();\n    window.myButton = window.paypal.Buttons({\n      createOrder: (data, actions, err) => {\n        return actions.order.create({\n          intent: \"CAPTURE\",\n          purchase_units: [{\n            description: \"Flight Booking\",\n            amount: {\n              currency_code: \"USD\",\n              value: val\n            }\n          }]\n        });\n      },\n      onApprove: async (data, actions) => {\n        const order = await actions.order.capture();\n        alert(\"payment successful\");\n        navigate(\"/booking\");\n        console.log(order);\n      },\n      onError: err => {\n        console.log(err);\n      }\n    });\n    window.myButton.render(paypal.current);\n  }, [val]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container p-5 my-5\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card text-center \",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-header bg-secondary\",\n        ref: paypal\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 1\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 9\n  }, this);\n};\n_s(PaymentComponent, \"jk0ytfqE963/xQSNGMeOMX9c1Dg=\", false, function () {\n  return [useSearchParams, useNavigate];\n});\n_c = PaymentComponent;\nexport default PaymentComponent;\nvar _c;\n$RefreshReg$(_c, \"PaymentComponent\");","map":{"version":3,"names":["useEffect","useRef","useState","useNavigate","useSearchParams","authHeader","PaymentComponent","searchparams","console","log","get","id","parseInt","records","setBooking","fetch","headers","then","res","json","result","navigate","val","parseFloat","price","paypal","window","myButton","close","Buttons","createOrder","data","actions","err","order","create","intent","purchase_units","description","amount","currency_code","value","onApprove","capture","alert","onError","render","current"],"sources":["C:/Users/bmariyam/Downloads/project (3)/project/frontend flight/flight-new/src/components/Payment.js"],"sourcesContent":["import {useEffect,useRef,useState} from 'react'\r\nimport { useNavigate, useSearchParams } from 'react-router-dom';\r\nimport authHeader from '../services/auth-header';\r\nlet PaymentComponent = ()=>{\r\n    const [searchparams] = useSearchParams();\r\n    console.log(searchparams.get(\"Fid\"));\r\n    const id = parseInt(searchparams.get(\"Fid\"));\r\n    const[records,setBooking]=useState([])\r\n    useEffect(()=>{\r\n      fetch(`http://localhost:8082/api/booking/tickets/${id}`,{ headers: authHeader() })\r\n      .then(res=>res.json())\r\n      .then((result)=>{\r\n        setBooking(result);\r\n      })\r\n    },[id]);\r\n console.log(records)\r\nconst navigate = useNavigate();\r\nconst val = parseFloat(records.price);\r\nconsole.log(val)\r\n\r\n  const paypal = useRef();\r\n    useEffect(() => {\r\n      if(window.myButton) window.myButton.close();\r\n        window.myButton = window.paypal\r\n          .Buttons({\r\n            createOrder: (data, actions, err) => {\r\n              return actions.order.create({\r\n                intent: \"CAPTURE\",\r\n                purchase_units: [\r\n                  {\r\n                    description: \"Flight Booking\",\r\n                    amount: {\r\n                      currency_code: \"USD\",\r\n                      value: val,\r\n                    },\r\n                  },\r\n                ],\r\n              });\r\n            },\r\n            onApprove: async (data, actions) => {\r\n              const order = await actions.order.capture();\r\n              alert(\"payment successful\");\r\n              navigate(\"/booking\");\r\n              console.log(order);\r\n              \r\n            },\r\n            onError: (err) => {\r\n              console.log(err);\r\n            },\r\n          })\r\n          window.myButton.render(paypal.current);\r\n         \r\n      }, [val]);\r\n    \r\n    return (\r\n        <div className='container p-5 my-5'>\r\n            \r\n        <div className=\"card text-center \">\r\n<div className=\"card-header bg-secondary\"  ref={paypal}>\r\n \r\n</div>\r\n\r\n    </div>\r\n    </div>\r\n    )\r\n}\r\nexport default PaymentComponent;"],"mappings":";;AAAA,SAAQA,SAAS,EAACC,MAAM,EAACC,QAAQ,QAAO,OAAO;AAC/C,SAASC,WAAW,EAAEC,eAAe,QAAQ,kBAAkB;AAC/D,OAAOC,UAAU,MAAM,yBAAyB;AAAC;AACjD,IAAIC,gBAAgB,GAAG,MAAI;EAAA;EACvB,MAAM,CAACC,YAAY,CAAC,GAAGH,eAAe,EAAE;EACxCI,OAAO,CAACC,GAAG,CAACF,YAAY,CAACG,GAAG,CAAC,KAAK,CAAC,CAAC;EACpC,MAAMC,EAAE,GAAGC,QAAQ,CAACL,YAAY,CAACG,GAAG,CAAC,KAAK,CAAC,CAAC;EAC5C,MAAK,CAACG,OAAO,EAACC,UAAU,CAAC,GAACZ,QAAQ,CAAC,EAAE,CAAC;EACtCF,SAAS,CAAC,MAAI;IACZe,KAAK,CAAE,6CAA4CJ,EAAG,EAAC,EAAC;MAAEK,OAAO,EAAEX,UAAU;IAAG,CAAC,CAAC,CACjFY,IAAI,CAACC,GAAG,IAAEA,GAAG,CAACC,IAAI,EAAE,CAAC,CACrBF,IAAI,CAAEG,MAAM,IAAG;MACdN,UAAU,CAACM,MAAM,CAAC;IACpB,CAAC,CAAC;EACJ,CAAC,EAAC,CAACT,EAAE,CAAC,CAAC;EACVH,OAAO,CAACC,GAAG,CAACI,OAAO,CAAC;EACrB,MAAMQ,QAAQ,GAAGlB,WAAW,EAAE;EAC9B,MAAMmB,GAAG,GAAGC,UAAU,CAACV,OAAO,CAACW,KAAK,CAAC;EACrChB,OAAO,CAACC,GAAG,CAACa,GAAG,CAAC;EAEd,MAAMG,MAAM,GAAGxB,MAAM,EAAE;EACrBD,SAAS,CAAC,MAAM;IACd,IAAG0B,MAAM,CAACC,QAAQ,EAAED,MAAM,CAACC,QAAQ,CAACC,KAAK,EAAE;IACzCF,MAAM,CAACC,QAAQ,GAAGD,MAAM,CAACD,MAAM,CAC5BI,OAAO,CAAC;MACPC,WAAW,EAAE,CAACC,IAAI,EAAEC,OAAO,EAAEC,GAAG,KAAK;QACnC,OAAOD,OAAO,CAACE,KAAK,CAACC,MAAM,CAAC;UAC1BC,MAAM,EAAE,SAAS;UACjBC,cAAc,EAAE,CACd;YACEC,WAAW,EAAE,gBAAgB;YAC7BC,MAAM,EAAE;cACNC,aAAa,EAAE,KAAK;cACpBC,KAAK,EAAEnB;YACT;UACF,CAAC;QAEL,CAAC,CAAC;MACJ,CAAC;MACDoB,SAAS,EAAE,OAAOX,IAAI,EAAEC,OAAO,KAAK;QAClC,MAAME,KAAK,GAAG,MAAMF,OAAO,CAACE,KAAK,CAACS,OAAO,EAAE;QAC3CC,KAAK,CAAC,oBAAoB,CAAC;QAC3BvB,QAAQ,CAAC,UAAU,CAAC;QACpBb,OAAO,CAACC,GAAG,CAACyB,KAAK,CAAC;MAEpB,CAAC;MACDW,OAAO,EAAGZ,GAAG,IAAK;QAChBzB,OAAO,CAACC,GAAG,CAACwB,GAAG,CAAC;MAClB;IACF,CAAC,CAAC;IACFP,MAAM,CAACC,QAAQ,CAACmB,MAAM,CAACrB,MAAM,CAACsB,OAAO,CAAC;EAE1C,CAAC,EAAE,CAACzB,GAAG,CAAC,CAAC;EAEX,oBACI;IAAK,SAAS,EAAC,oBAAoB;IAAA,uBAEnC;MAAK,SAAS,EAAC,mBAAmB;MAAA,uBAC1C;QAAK,SAAS,EAAC,0BAA0B;QAAE,GAAG,EAAEG;MAAO;QAAA;QAAA;QAAA;MAAA;IAEjD;MAAA;MAAA;MAAA;IAAA;EAEI;IAAA;IAAA;IAAA;EAAA,QACA;AAEV,CAAC;AAAA,GA9DGnB,gBAAgB;EAAA,QACOF,eAAe,EAYzBD,WAAW;AAAA;AAAA,KAbxBG,gBAAgB;AA+DpB,eAAeA,gBAAgB;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}